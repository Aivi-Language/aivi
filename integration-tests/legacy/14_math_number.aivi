module examples.stdlib_math_number
export main

use aivi.console
use aivi.math
use aivi.number.decimal
use aivi.testing

main : Effect Text Unit
main = effect {
  g = gcd 54 24
  print "gcd: {g}"

  fact = factorial 10
  print "10! = {fact}"

  price = fromFloat 19.99
  total = price + fromFloat 0.01
  print "total: {total}"

  unit = sin (degrees 90.0)
  print "sin: {unit}"
}

__test_sentinel = 0

@test
smoke = effect {
  _ <- assert (gcd 54 24 == 6)
  _ <- assert (factorial 5 == 120)
  price = fromFloat 19.99
  total = price + fromFloat 0.01
  _ <- assert (abs (toFloat total - 20.0) < 0.00001)
  _ <- assert (abs (sin (degrees 90.0) - 1.0) < 0.00001)
}
