@no_prelude
module integrationTests.stdlib.aivi.concurrency.send

use aivi
use aivi.testing
use aivi.concurrency

@test
smoke = effect {
  (tx, rx) <- make Unit
  _        <- send tx Unit
  res      <- recv rx
  _        <- res ?
    | Ok _  => assert True
    | Err _ => assert False
    _ <- close tx
}
