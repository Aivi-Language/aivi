@no_prelude
module integrationTests.stdlib.aivi.i18n.Bundle
@no_prelude
module integrationTests.stdlib.aivi.i18n.Bundle

use aivi
use aivi.testing
use aivi.i18n

@test
smoke = effect {
  loc =
    (parseLocale "en-US") ?
      | Ok l  => l
      | Err _ => { language: "en", region: Some "US", variants: [], tag: "en-US" }

    bres = bundleFromProperties loc "app.welcome = Hello, {name:Text}!\n"
    _ <- bres ?
      | Err _ => assert False
      | Ok b  =>
      _ <- assert (t b (~k"app.welcome") { name: "Ada" } == "Hello, Ada!")
}
