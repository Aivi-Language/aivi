@no_prelude
module integrationTests.stdlib.aivi.channel

use aivi
use aivi.testing
use aivi

@test
sendRecv = effect {
  (tx, rx) <- channel.make Unit
  _        <- channel.send tx Unit
  res      <- channel.recv rx
  _        <- res ?
    | Ok _  => assert True
    | Err _ => assert False
    _ <- channel.close tx
}
