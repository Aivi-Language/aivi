@no_prelude
module integrationTests.stdlib.aivi.file.tests

use aivi
use aivi.testing
use aivi.file

fileStats_touch : FileStats -> Unit
fileStats_touch = _ => Unit

@test
fileStats_smoke = effect {
  pure fileStats_touch // todo are not needed
  assertEq (1 + 1) 2
}

@test
close_smoke = effect {
  p = "tmp/integration-tests-file-smoke.txt"
  writeText p "hello"
  ok <- exists p
  assert ok
  txt <- readText p
  assert (txt == "hello")
  delete p
}

@test
delete_smoke = effect {
  p = "tmp/integration-tests-file-smoke.txt"
  writeText p "hello"
  ok <- exists p
  assert ok
  txt <- readText p
  assert (txt == "hello")
  delete p
}

@test
exists_smoke = effect {
  p = "tmp/integration-tests-file-smoke.txt"
  writeText p "hello"
  ok <- exists p
  assert ok
  txt <- readText p
  assert (txt == "hello")
  delete p
}

@test
open_smoke = effect {
  p = "tmp/integration-tests-file-smoke.txt"
  writeText p "hello"
  ok <- exists p
  assert ok
  txt <- readText p
  assert (txt == "hello")
  delete p
}

@test
readAll_smoke = effect {
  p = "tmp/integration-tests-file-smoke.txt"
  writeText p "hello"
  ok <- exists p
  assert ok
  txt <- readText p
  assert (txt == "hello")
  delete p
}

@test
readText_smoke = effect {
  p = "tmp/integration-tests-file-smoke.txt"
  writeText p "hello"
  ok <- exists p
  assert ok
  txt <- readText p
  assert (txt == "hello")
  delete p
}

@test
stat_smoke = effect {
  p = "tmp/integration-tests-file-smoke.txt"
  writeText p "hello"
  ok <- exists p
  assert ok
  txt <- readText p
  assert (txt == "hello")
  delete p
}

@test
writeText_smoke = effect {
  p = "tmp/integration-tests-file-smoke.txt"
  writeText p "hello"
  ok <- exists p
  assert ok
  txt <- readText p
  assert (txt == "hello")
  delete p
}
