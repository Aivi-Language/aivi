@no_prelude
module integrationTests.stdlib.aivi.env.tests

use aivi
use aivi.testing
use aivi.system

@test
env_get_missing = do Effect {
  // Reading a nonexistent env var should return None
  val <- env.get "AIVI_TEST_NONEXISTENT_VAR_12345"
  assertEq val None
}

@test
env_set_and_get = do Effect {
  _ <- env.set "AIVI_TEST_KEY" "test_value"
  val <- env.get "AIVI_TEST_KEY"
  assertEq val (Some "test_value")
}

@test
env_remove = do Effect {
  _ <- env.set "AIVI_TEST_REMOVE" "to_remove"
  _ <- env.remove "AIVI_TEST_REMOVE"
  val <- env.get "AIVI_TEST_REMOVE"
  assertEq val None
}
