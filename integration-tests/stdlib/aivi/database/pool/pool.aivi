@no_prelude
module integrationTests.stdlib.aivi.database.pool.tests

use aivi
use aivi.testing
use aivi.database.pool

@test
poolError_construct = do Effect {
  e1 = Timeout
  e2 = Closed
  e3 = HealthFailed
  e4 = InvalidConfig "bad"
  assert True
}

@test
queuePolicy_construct = do Effect {
  q1 = Fifo
  q2 = Lifo
  assert True
}

@test
poolStats_type = do Effect {
  s = { size: 4, idle: 2, inUse: 2, waiters: 0, closed: False }
  assertEq s.size 4
  assertEq s.idle 2
  assert (s.closed == False)
}
