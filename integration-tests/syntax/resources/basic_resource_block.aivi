@no_prelude
module integrationTests.syntax.resources.basicResourceBlock

export managedFile

use aivi
use aivi.testing

managedFile : Text -> Resource Text FileHandle
managedFile = path => resource {
  handle <- file.open path
  yield handle
  file.close handle
}

@test
resourceOpenFailureIsCaught = effect {
  pure managedFile
  assertEq (1 + 1) 2
}
