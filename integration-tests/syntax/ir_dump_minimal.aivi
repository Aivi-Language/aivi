@no_prelude
module integrationTests.syntax.irDumpMinimal

use aivi
use aivi.testing

value = 1 + 2
pair = (value, "ok")

map = f xs => xs match
  | []           => []
  | [x, ...rest] => [f x, ...(map f rest)]

maybeInc = opt => opt match
  | Some n => n + 1
  | None   => 0

result =
  [Some 1, None, Some 41] |> map maybeInc

expected = [2, 0, 42]

@test "basic IR pipeline end-to-end"
irDumpMinimalRuns = do Effect {
  assertEq value 3
  assertEq pair (3, "ok")
  assertEq (maybeInc (Some 1)) 2
  assertEq result expected
}
